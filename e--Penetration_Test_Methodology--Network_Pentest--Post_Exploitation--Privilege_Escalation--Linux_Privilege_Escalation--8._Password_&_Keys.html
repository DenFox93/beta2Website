<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>8. Password & Keys</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>8. Password & Keys</h1><br/><strong><h3>Passwords</h3></strong><br />• weak password storage and password re-use can be easy ways to escalate privileges.<br />• While the root user’s account password is hashed and stored securely in /etc/shadow, other passwords, such as those for services may be stored in plaintext in config files.<br />• If the root user re-used their password for a service, that password may be found and used to switch to the root user.<br /><br /><br />Credentials can be found in:<br />• configuration files (.conf, .config, .xml, etc.)<br />• shell scripts<br />• user&#39;s bash history file<br />• backup (.bak) files<br />• database files<br />• text files<br /><br /><br /><br /><br /><br />• Search for file with inside the word “password”<br />    <div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">find</span> <span style="color:#ff9d00;font-weight:700">.</span> -type f -exec <span style="color:#ff9d00;font-weight:700">grep</span> -i -I <span style="color:#3ad900;font-weight:400">&quot;PASSWORD&quot;</span> <span style="color:#ff9d00;font-weight:700">{}</span> <span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>null <span style="color:#333333;font-weight:400">\;</span>                  <span style="color:#0088ff;font-weight:400">#search in the current directory</span></pre></div><br />• Locate files that contain password in the name<br />    <div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">locate</span> password <span style="color:#ff9d00;font-weight:700">|</span> <span style="color:#ff9d00;font-weight:700">more</span></pre></div><br />• search in the history<br />    <div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">history</span> <span style="color:#ff9d00;font-weight:700">|</span> <span style="color:#ff9d00;font-weight:700">grep</span> pass</pre></div><br />	<div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">cat</span> ~<span style="color:#ff9d00;font-weight:700">/</span>.bash_history</pre></div><br /><br />• MySQL database credentials within WordPress configuration files:<br />	<div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">find</span> <span style="color:#ff9d00;font-weight:700">/</span>var -name wp-config.php <span style="color:#ff9d00;font-weight:700">2&gt;</span>1<br /><span style="color:#ff9d00;font-weight:700">cat</span> wp-config.php <span style="color:#ff9d00;font-weight:700">|</span> <span style="color:#ff9d00;font-weight:700">grep</span> <span style="color:#3ad900;font-weight:400">&#39;DB_USER\|DB_PASSWORD&#39;</span></pre></div><br /><br />• Configuration files not in */proc/* folders<br />	<div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">find</span> <span style="color:#ff9d00;font-weight:700">/</span> <span style="color:#ff9d00;font-weight:700">!</span> -path <span style="color:#3ad900;font-weight:400">&quot;*/proc/*&quot;</span> -iname <span style="color:#3ad900;font-weight:400">&quot;*config*&quot;</span> -type f 2&gt;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>null</pre></div><br /><br /><br />• SSH keys<br />	Whenever finding SSH keys check the known_hosts file to find targets. This file contains a list of public keys for all the hosts which the user has connected to in the past and may be useful for lateral movement or to find data on a remote host that can be used to perform privilege escalation on our target.<br />	<div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">ls</span> ~<span style="color:#ff9d00;font-weight:700">/</span>.ssh</pre></div><br /><br /><br /><strong>Bibliography:</strong><br />• TCM Security: Linux Privilege Escalation for Beginners (<a href="https://academy.tcm-sec.com/p/linux-privilege-escalation">https://academy.tcm-sec.com/p/linux-privilege-escalation</a>)<br />• Tib3rius: Linux Privilege Escalation for OSCP &amp; Beyond! (<a href="https://www.udemy.com/course/linux-privilege-escalation/">https://www.udemy.com/course/linux-privilege-escalation/</a>)<br /></div>
</body>
</html>
