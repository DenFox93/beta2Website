<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>send commands to server</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>send commands to server</h1><br/><div class="codebox"><pre><span style="color:#0088ff;font-weight:400">#!/usr/bin/env python3</span><br /><br /><span style="color:#333333;font-weight:400">import</span> socket<br /><br />SRV_ADDR = <span style="color:#3ad900;font-weight:400">&quot;192.168.1.29&quot;</span><br />SRV_PORT = <span style="color:#ff0044;font-weight:400">65432</span><br /><br /><span style="color:#ff9d00;font-weight:700">def</span> <span style="color:#333333;font-weight:400">print_menu</span>():<br />    <span style="color:#ff9d00;font-weight:700">print</span>(<span style="color:#3ad900;font-weight:400">&quot;&quot;&quot;\n\nSelect one of those:<br />0) Close the connection<br />1) Get system info<br />2) List directory contents&quot;&quot;&quot;</span>)<br /><br />s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br />s.connect((SRV_ADDR, SRV_PORT))<br /><br /><span style="color:#ff9d00;font-weight:700">print</span>(<span style="color:#3ad900;font-weight:400">&quot;Connection established&quot;</span>)<br />print_menu()<br /><br /><span style="color:#ff9d00;font-weight:700">while</span> <span style="color:#ff0044;font-weight:400">1</span>:<br />    message = <span style="color:#ff9d00;font-weight:700">input</span>(<span style="color:#3ad900;font-weight:400">&quot;\n-Select an option: &quot;</span>)<br /><br />    <span style="color:#ff9d00;font-weight:700">if</span>(message == <span style="color:#3ad900;font-weight:400">&quot;0&quot;</span>):<br />        s.sendall(message.encode())<br />        s.close()<br />        <span style="color:#ff9d00;font-weight:700">break</span><br />        <br />    <span style="color:#ff9d00;font-weight:700">elif</span>(message == <span style="color:#3ad900;font-weight:400">&quot;1&quot;</span>):<br />        s.sendall(message.encode())<br />        data = s.recv(<span style="color:#ff0044;font-weight:400">1024</span>)<br />        <span style="color:#ff9d00;font-weight:700">if</span> <span style="color:#ff9d00;font-weight:700">not</span> data:<br />            <span style="color:#ff9d00;font-weight:700">break</span><br />        <span style="color:#ff9d00;font-weight:700">else</span>:<br />            <span style="color:#ff9d00;font-weight:700">print</span>(data.decode(<span style="color:#3ad900;font-weight:400">&#39;utf-8&#39;</span>))<br />        <br />    <span style="color:#ff9d00;font-weight:700">elif</span>(message == <span style="color:#3ad900;font-weight:400">&quot;2&quot;</span>):<br />        path = <span style="color:#ff9d00;font-weight:700">input</span>(<span style="color:#3ad900;font-weight:400">&quot;Insert the path: &quot;</span>)<br />        s.sendall(message.encode())<br />        s.sendall(path.encode())<br />        data = s.recv(<span style="color:#ff0044;font-weight:400">1024</span>)<br />        data = data.decode(<span style="color:#3ad900;font-weight:400">&#39;utf-8&#39;</span>).split(<span style="color:#3ad900;font-weight:400">&quot;***&quot;</span>) <span style="color:#0088ff;font-weight:400">#split string received with ***</span><br />        <span style="color:#ff9d00;font-weight:700">print</span>(<span style="color:#3ad900;font-weight:400">&quot;-&quot;</span>*<span style="color:#ff0044;font-weight:400">50</span>)  <span style="color:#0088ff;font-weight:400">#delimit data received</span><br />        <span style="color:#ff9d00;font-weight:700">for</span> x <span style="color:#ff9d00;font-weight:700">in</span> data:<br />            <span style="color:#ff9d00;font-weight:700">print</span>(x)<br />        <span style="color:#ff9d00;font-weight:700">print</span>(<span style="color:#3ad900;font-weight:400">&quot;-&quot;</span>*<span style="color:#ff0044;font-weight:400">50</span>) <span style="color:#0088ff;font-weight:400">#delimit data received</span><br />        <br />    print_menu() <span style="color:#0088ff;font-weight:400">#reprint menu</span><br /></pre></div><br /><br /></div>
</body>
</html>
