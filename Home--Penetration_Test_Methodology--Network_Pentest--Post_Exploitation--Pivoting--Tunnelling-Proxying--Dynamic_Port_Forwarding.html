<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Dynamic Port Forwarding</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Dynamic Port Forwarding</h1><br/><a href=""><img src="images/776-1.png" alt="images/776-1.png" /></a><br />Dynamic Port Forwarding unlike Local/Remote Port Forwarding allows a communication not on a single port, but across a range of ports. <br /><br /><br /><br /><strong><h3>Tools that we ca use to Access to the Tunnel Created</h3></strong><br /><strong><h3>• Proxychains</h3></strong><br />   1) configure proxychains <br />       Proxychains is a tool that forces any TCP connection made by any given application, to follow through proxy like SOCKS4, SOCKS5, TOR and so on...<br />       We have to configure proxychains to match the host(SRVHOST) the port(SRVPORT) that we choose for our proxy server when we have used the modul<br />   ◇ socks4<br />       <div class="codebox"><pre>root@kali<span style="color:#ff9d00;font-weight:700">:/</span># <span style="color:#ff9d00;font-weight:700">echo</span> <span style="color:#3ad900;font-weight:400">&quot;socks5 127.0.0.1 1080&quot;</span> &gt; <span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>proxychains.conf</pre></div><br />       <a href=""><img src="images/776-2.png" alt="images/776-2.png" /></a><br />   ◇ socks5<br />       <a href=""><img src="images/776-3.png" alt="images/776-3.png" /></a><br />   2) Run commands through proxychains<br />       Before the command we have to add <span style="text-decoration:underline;">proxychains</span> so the command will be forced to run through it.<br />       <span style="color:#a5452a;">examples:</span><br />       <div class="codebox"><pre>root@kali<span style="color:#ff9d00;font-weight:700">:/</span># <br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># proxychains -q nmap -sT -Pn -T5 -n --top-ports 100 10.100.40.107  <span style="color:#0088ff;font-weight:400">#use -sT in proxychains, -sS could not work</span><br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># proxychains -q nmap -sTV -Pn -T5 -n --top-ports 100 10.100.40.107   <span style="color:#0088ff;font-weight:400">#-sTV == -sT + -sV </span><br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># proxychains <span style="color:#ff9d00;font-weight:700">ssh</span> 192.168.1.23<br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># proxychains telnet 192.168.1.23<br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># proxychains iceweasel             <span style="color:#0088ff;font-weight:400">#access to internal website like if we are on victim machine</span><br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># proxychains -q hydra -C telnet.txt telnet<span style="color:#ff9d00;font-weight:700">://</span>10.32.121.23 -V <span style="color:#ff9d00;font-weight:700">|&amp;</span> <span style="color:#ff9d00;font-weight:700">tee</span>    <span style="color:#0088ff;font-weight:400">#with -V (verbose) could be too much verbose</span><br />                                                                                   <span style="color:#0088ff;font-weight:400">#mostly if we have a lot of combinations of user/password</span></pre></div><br />       proxychains could give us a lot of debug information...<br />       <a href=""><img src="images/776-4.png" alt="images/776-4.png" /></a><br />       to avoid that we could use the quiet mode (-q)<br />       <div class="codebox"><pre>proxychains -q nmap -sT -Pn -n 192.168.1.23 --top-ports 100</pre></div><br />       <br />       <strong>ATTENTION</strong>: with proxychains <span style="text-decoration:underline;">use always</span> the options “-sT -Pn”  (also with scripts)<br />       <br />   ◇ if we see more requests in loop with nmap, is because we have used -sV that need to take more informations!<br />       <a href=""><img src="images/776-5.png" alt="images/776-5.png" /></a><br />       <a href=""><img src="images/776-6.png" alt="images/776-6.png" /></a><br />       <br />       <br /><strong><h3>• FoxyProxy</h3></strong><br />    While Proxychains is a good option when working with CLI tools, but if working in a web browser to access a webapp through a proxy, there is FoxyProxy.<br />    <strong>Note</strong> that we can also start Firefox with Proxychains and then access to the target host<br />    <a href=""><img src="images/776-7.png" alt="images/776-7.png" /></a><br />    <a href=""><img src="images/776-8.png" alt="images/776-8.png" /></a><br />    <br />    <a href=""><img src="images/776-9.png" alt="images/776-9.png" /></a><br />    <a href=""><img src="images/776-10.png" alt="images/776-10.png" /></a><br />    <br />    <a href=""><img src="images/776-11.png" alt="images/776-11.png" /></a><br /><br /><br /><br /><br /><br /><br />Bibliography:<br />• <a href="https://unix.stackexchange.com/questions/115897/whats-ssh-port-forwarding-and-whats-the-difference-between-ssh-local-and-remot">https://unix.stackexchange.com/questions/115897/whats-ssh-port-forwarding-and-whats-the-difference-between-ssh-local-and-remot</a><br />• <a href="https://zaiste.net/posts/ssh-port-forwarding/">https://zaiste.net/posts/ssh-port-forwarding/</a><br />• <a href="https://pen-testing.sans.org/resources/papers/gwapt/tunneling-pivoting-web-application-penetration-testing-120229">https://pen-testing.sans.org/resources/papers/gwapt/tunneling-pivoting-web-application-penetration-testing-120229</a><br /></div>
</body>
</html>
