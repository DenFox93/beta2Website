<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>ping Scanning (Hosts alive)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>ping Scanning (Hosts alive)</h1><br/><br />One of the most simple methods to check if an host is up, is by using ICMP echo request<br /><br /><div class="codebox"><pre># gem install net-ping -r</pre></div><br />    <a href=""><img src="images/1954-1.png" alt="images/1954-1.png" /></a><br /><br /><strong>Ping script</strong><br /><div class="codebox"><pre><span style="color:#7f0044;font-weight:400">require</span> <span style="color:#3ad900;font-weight:400">&#39;net/ping&#39;</span><br />host = <span style="color:#7f0044;font-weight:400">ARGV</span>[<span style="color:#ff0044;font-weight:400">0</span>]<br />req = <span style="color:#7f0044;font-weight:400">Net::Ping::ICMP</span>.new(host)<br /><span style="color:#ff9d00;font-weight:700">if</span> req.ping <span style="color:#ff9d00;font-weight:700">then</span> puts host + <span style="color:#3ad900;font-weight:400">&quot; UP&quot;</span><br /><span style="color:#ff9d00;font-weight:700">else</span> puts host + <span style="color:#3ad900;font-weight:400">&quot; DOWN&quot;</span> <span style="color:#ff9d00;font-weight:700">end</span></pre></div><br />    <a href=""><img src="images/1954-2.png" alt="images/1954-2.png" /></a><br /><br /><strong>Ping Sweep script</strong><br />In a ping sweep in an internal network we have to perform 254 ICMP requests, one for each host in a /24 network.<br />• While running, we will print to stdout all of the IP addresses that respond with an ICMP reply.<br />• By default, net-ping sets the ICMP response timeout to 5 seconds. Therefore the time to scan a /24 network can be (in the worst case) 254*5 seconds, about 20 minutes.<br />   ◇ To set a <span style="color:#00ff00;">custom timeout</span>, you have to <span style="text-decoration:underline;">create the Net::Ping::ICMP instance</span> and provide the timeout as an argument.<br />• Note that for simplicity of the script as input we need to insert only /24 networks and <span style="color:#ff0000;text-decoration:underline;">not provide the last octet</span><br /><br /><div class="codebox"><pre><span style="color:#7f0044;font-weight:400">require</span> <span style="color:#3ad900;font-weight:400">&#39;net/ping&#39;</span><br /><br /><span style="color:#ff9d00;font-weight:700">def</span> main(network,timeout)<br />	timeout = timeout ? timeout : <span style="color:#ff0044;font-weight:400">1</span><br />	(1..254).each <span style="color:#ff9d00;font-weight:700">do</span> |i| <br />		req = <span style="color:#7f0044;font-weight:400">Net::Ping::ICMP</span>.new(network+i.to_s,<span style="color:#ff0044;font-weight:700">nil</span>,timeout.to_f)<br />		puts network+i.to_s <span style="color:#ff9d00;font-weight:700">if</span> req.ping<br />	<span style="color:#ff9d00;font-weight:700">end</span><br /><span style="color:#ff9d00;font-weight:700">end</span><br /><span style="color:#ff9d00;font-weight:700">begin</span><br />	main(<span style="color:#7f0044;font-weight:400">ARGV</span>[<span style="color:#ff0044;font-weight:400">0</span>],<span style="color:#7f0044;font-weight:400">ARGV</span>[<span style="color:#ff0044;font-weight:400">1</span>])<br /><span style="color:#ff9d00;font-weight:700">end</span><br /></pre></div><br />    <a href=""><img src="images/1954-3.png" alt="images/1954-3.png" /></a><br />    <br /><br /></div>
</body>
</html>
