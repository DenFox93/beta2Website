<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>firewall settings</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>firewall settings</h1><br/>Before make changes to the rules of the Firewall make sure that it is allowed in the Rules of Engagement<br /><br /><strong>turn off firewall</strong><br />disable the firewall of the remote pc<br /><div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh firewall <span style="color:#ff9d00;font-weight:700">set</span> opmode mode<span style="color:#ff9d00;font-weight:700">=</span>disable       <span style="color:#0088ff;font-weight:400">#Windows XP</span><br />C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall <span style="color:#ff9d00;font-weight:700">set</span> allprofiles state off  <span style="color:#0088ff;font-weight:400">#from Windows Vista</span></pre></div><br /><br /><strong>view current profile status</strong><br />status of the main settings of the Firewall and what its current profile<br /><div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall show currentprofile</pre></div><br />    <a href=""><img src="images/1088-1.png" alt="images/1088-1.png" /></a><br /><br /><strong>programs&#39;s connectivity allowed by the firewall</strong><br /><div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh firewall show allowedprogram</pre></div><br /><br /><strong>view inbound and outbound rules of the firewall</strong><br /><div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall firewall show rule name<span style="color:#ff9d00;font-weight:700">=</span>all</pre></div><br />    <a href=""><img src="images/1088-2.png" alt="images/1088-2.png" /></a><br /><br /><strong>Add rule in Firewall</strong><br />• <span style="text-decoration:underline;">allow port</span>: if we want to allow port 4444.:<br />    <div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall firewall add rule name<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#3ad900;font-weight:400">&quot;Allow Port 4444 inbound&quot;</span> protocol<span style="color:#ff9d00;font-weight:700">=</span>TCP <span style="color:#ff9d00;font-weight:700">dir=in</span> remoteport<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#333333;font-weight:400">4444</span> action<span style="color:#ff9d00;font-weight:700">=</span>allow  <span style="color:#0088ff;font-weight:400">#inbound</span><br />C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall firewall add rule name<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#3ad900;font-weight:400">&quot;Allow Port 4444 outbound&quot;</span> protocol<span style="color:#ff9d00;font-weight:700">=</span>TCP <span style="color:#ff9d00;font-weight:700">dir=</span>out remoteport<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#333333;font-weight:400">4444</span> action<span style="color:#ff9d00;font-weight:700">=</span>allow  <span style="color:#0088ff;font-weight:400">#outbound</span></pre></div><br />• <span style="text-decoration:underline;">allow an IP Address</span>:<br />    <div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall firewall add rule name<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#3ad900;font-weight:400">&quot;IP Allow inbound&quot;</span> <span style="color:#ff9d00;font-weight:700">dir=in</span> interface<span style="color:#ff9d00;font-weight:700">=</span>any action<span style="color:#ff9d00;font-weight:700">=</span>allow remoteip<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#333333;font-weight:400">192.168</span>.<span style="color:#333333;font-weight:400">1.122</span>          <span style="color:#0088ff;font-weight:400">#inbound</span><br />C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall firewall add rule name<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#3ad900;font-weight:400">&quot;IP Allow outbound&quot;</span> <span style="color:#ff9d00;font-weight:700">dir=</span>out interface<span style="color:#ff9d00;font-weight:700">=</span>any action<span style="color:#ff9d00;font-weight:700">=</span>allow remoteip<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#333333;font-weight:400">192.168</span>.<span style="color:#333333;font-weight:400">1.122</span>          <span style="color:#0088ff;font-weight:400">#inbound</span></pre></div><br /><br /><strong>Delete rule in Firewall</strong><br />After a penetration test remember to clean up the changes done<br />    <div class="codebox"><pre>C<span style="color:#ff9d00;font-weight:700">:\</span>&gt; netsh advfirewall firewall <span style="color:#ff9d00;font-weight:700">del</span> rule name<span style="color:#ff9d00;font-weight:700">=</span><span style="color:#3ad900;font-weight:400">&quot;IP Allow inbound&quot;</span></pre></div><br />    </div>
</body>
</html>
