<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>FTP (21)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>FTP (21)</h1><br/>File Transfer Protocol (FTP) is a standard network protocol used to transfer files between computers<br />By default, FTP listens on port TCP/21<br /><br /><br />To attack an FTP Server, we can:<br />   ◇ abuse misconfiguration<br />   ◇ abuse excessive privileges<br />   ◇ exploit known vulnerabilities<br /><br /><strong><h3>Enumeration</h3></strong><br />• Nmap default scripts <strong>-sC</strong> includes the <a href="https://nmap.org/nsedoc/scripts/ftp-anon.html">ftp-anon</a> Nmap script which checks if a FTP server allows anonymous logins. <br />• The version enumeration flag <strong>-sV</strong> provides interesting information about FTP services, such as the FTP banner, which often includes the version name. <br />• We can use the ftp client or nc to interact with the FTP service.<br />	<div class="codebox"><pre>sudo nmap <span style="color:#ff9d00;font-weight:700">-</span>sS <span style="color:#ff9d00;font-weight:700">-</span>T4 <span style="color:#ff9d00;font-weight:700">-</span>p<span style="color:#ff9d00;font-weight:700">-</span> <span style="color:#333333;font-weight:400">10.129</span>.<span style="color:#333333;font-weight:400">118.107</span></pre></div><br />	<div class="codebox"><pre>sudo nmap <span style="color:#ff9d00;font-weight:700">-sC</span> <span style="color:#ff9d00;font-weight:700">-sV</span> <span style="color:#ff9d00;font-weight:700">-</span>p <span style="color:#333333;font-weight:400">2121</span> <span style="color:#333333;font-weight:400">10.129</span>.<span style="color:#333333;font-weight:400">118.107</span></pre></div><br />	<a href=""><img src="images/2642-1.png" alt="images/2642-1.png" /></a><br /><br /><strong><h3>Misconfigurations</h3></strong><br />• <strong>Anonymous Authentication</strong><br />	To access with anonymous login, we can use the <span style="text-decoration:underline;">anonymous</span> username and no the password<br />	<div class="codebox"><pre>ftp <span style="color:#333333;font-weight:400">192.168</span>.<span style="color:#333333;font-weight:400">2.142</span><br />ftp <span style="color:#ff9d00;font-weight:700">-</span>p <span style="color:#333333;font-weight:400">192.168</span>.<span style="color:#333333;font-weight:400">2.142</span><br />ftp&gt; <span style="color:#ff9d00;font-weight:700">ls</span><br /></pre></div><br />	<a href=""><img src="images/2642-2.png" alt="images/2642-2.png" /></a><br />   ◇ ls and cd → to move around directories like in Linux<br />   ◇ get → To download a single file, we use get<br />   ◇ mget → to download multiple files, we can use mget<br />   ◇ put → to upload a simple file<br />   ◇ mput → to upload multiple files<br />   ◇ help → for more information.<br /><br /><br /><strong><h3>NSE Nmap FTP scripts</h3></strong><br /><a href="https://nmap.org/nsedoc/scripts/#:~:text=query%20UDP%20probe.-,ftp%2Danon,-Checks%20if%20an">https://nmap.org/nsedoc/scripts/#:~:text=query%20UDP%20probe.-,ftp%2Danon,-Checks%20if%20an</a><br /><br /><br /><strong><h3>FTP Bounce Attack</h3></strong><br />An FTP bounce attack is a network attack that uses FTP servers to deliver outbound traffic to another device on the network.<br />The attacker uses a PORT command to trick the FTP connection into running commands and getting information from a device other than the intended server.<br />1. Consider we are targetting an FTP Server <code>FTP_DMZ</code> exposed to the internet.<br />2. But we know there is also another device within the same network, <code>Internal_DMZ</code>, is not exposed to the internet.<br />3.  We can use the connection to the <code>FTP_DMZ</code> server to scan <code>Internal_DMZ</code> using the FTP Bounce attack and obtain information about the server&#39;s open ports<br />4. Then, we can use that information as part of our attack against the infrastructure.<br /><br /><div class="codebox"><pre>nmap <span style="color:#ff9d00;font-weight:700">-</span>Pn <span style="color:#ff9d00;font-weight:700">-</span>v <span style="color:#ff9d00;font-weight:700">-</span>n <span style="color:#ff9d00;font-weight:700">-</span>p80 <span style="color:#ff9d00;font-weight:700">-</span>b anonymous<span style="color:#ff9d00;font-weight:700">:</span>password@[IP_FTP_DMZ] [IP_Internal_DMZ]</pre></div><br /></div>
</body>
</html>
